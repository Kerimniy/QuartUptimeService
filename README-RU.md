# QuartUptimeService
## Что это такое
Монитор Аптайма — это асинхронный веб-сервис, построенный на Python (Quart + asyncio), предназначенный для мониторинга доступности веб-сайтов и API. Он периодически отправляет HTTP-запросы к указанным URL, логирует статусы в SQLite и генерирует графики аптайма (за последний час). Поддерживает группы сервисов, аутентификацию и простой дашборд.
## Установка
1. **Зависимости** (Python 3.12+):
   ```
   pip install requirements.txt
   ```
   > **Примечание**: В оригинальном тексте была опечатка `requerments.txt` — правильное имя файла: `requirements.txt`. Это стандартный файл для pip, содержащий список библиотек, таких как `quart`, `asyncio`, `sqlite3`, `matplotlib` (для графиков) и другие. Убедитесь, что файл существует в корневой папке проекта.

2. **Файлы**: Поместите `app.py` и `Monitor.py` в одну и ту же папку. Создайте директорию `static/img/` для хранения изображений (логотипов, графиков).
   - `app.py` — основной файл приложения (Quart-сервер, маршруты, API).
   - `Monitor.py` — модуль с логикой мониторинга (асинхронные проверки, планировщик задач).
   - `static/img/` — здесь будут сохраняться сгенерированные графики аптайма и загруженные логотипы.

3. **Запуск**:
   ```
   python app.py
   ```
   - Сервер запускается по адресу `http://localhost:5000`.
   - При первом запуске: регистрация (логин/пароль). База данных (`uptime.db`) создаётся автоматически (SQLite-файл в корневой папке).
   > **Подробно о запуске**: Quart использует Hypercorn как ASGI-сервер по умолчанию. Если нужно изменить порт или хост, отредактируйте `app.py` (например, `app.run(host='0.0.0.0', port=8080)`). Для production рекомендуется использовать `hypercorn app:app` с настройками workers.

## Что вы можете делать
- **Мониторинг**: Добавляйте URL (с интервалом от 3 секунд, таймаутом, поддержкой редиректов, группами). Сервис выполняет пинги асинхронно.
  > **Объяснение асинхронности**: Используется `asyncio` для параллельных запросов. Например, `aiohttp.ClientSession` отправляет HEAD/GET-запросы без блокировки основного потока. Задачи планируются через `asyncio.create_task` или `asyncio.gather` для масштабируемости (сотни URL без задержек).

- **Просмотр**: На дашборде (`/`): графики аптайма (цвета: зелёный/красный по RGB-формуле), авто-обновление. Настраиваемое Markdown-описание и логотип.
  > **Генерация графиков**: Используется `matplotlib` или `plotly` для создания PNG-изображений. Цвета рассчитываются по формуле, например:  
  > ```python:disable-run
  > uptime_percent = (up_count / total_checks) * 100
  > green = (0, 255, 0) if uptime_percent >= 99 else (255, 0, 0)  # Упрощённый пример
  > ```
  > Авто-обновление — через JavaScript (setInterval) или WebSocket для real-time.

- **Администрирование** (`/admin/` после входа):
  - Создание/редактирование/удаление мониторов.
  - Загрузка логотипа (PNG/JPG и др., до 50 МБ).
  - Изменение заголовка и Markdown.
  > **Аутентификация**: Flask-Login-подобная сессия (Quart поддерживает). Хэширование паролей — `werkzeug.security` или `passlib`. DB-таблицы: `users`, `monitors`, `checks`.

- **API**: GET/POST для статистики (`/api/hourinfo`), мониторов (`/api/createMonitor` и т.д.). Ограничение скорости: 15 запросов/5 сек.
